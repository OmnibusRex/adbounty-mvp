[build]
builder = "dockerfile"
dockerfile = "backend/Dockerfile"

[deploy]
startCommand = "python -m uvicorn backend.main:app --host 0.0.0.0 --port $PORT"
healthcheckUrl = "/health"
healthcheckInterval = 10
healthcheckTimeout = 5

[env]
PORT = "8000"
DATABASE_URL = "${{ DATABASE_URL }}"
BOT_TOKEN = "${{ BOT_TOKEN }}"
TELEGRAM_API_ID = "${{ TELEGRAM_API_ID }}"
TELEGRAM_API_HASH = "${{ TELEGRAM_API_HASH }}"
TON_NETWORK = "testnet"
TON_ENDPOINT = "https://testnet.toncenter.com/api/v2/jsonRPC"
TON_API_KEY = "${{ TON_API_KEY }}"
ENVIRONMENT = "production"
LOG_LEVEL = "INFO"

[volumes]
src = "/tmp"
dest = "/app/tmp"

[services]
postgresql = true

[postgresql]
version = "14"
